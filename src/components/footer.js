import React from 'react';
import { NavLink } from 'react-router-dom'
import '../css/footer.css'
import { withRouter } from 'react-router-dom'
class Footer extends React.Component{
  constructor(){
    super()
    this.state = {
      initialHeight:document.documentElement.clientHeight,
      show:true
    }
    this.onWindowResize = this.onWindowResize.bind(this)
  }
  onWindowResize(){
    if(this.state.initialHeight-200 > document.documentElement.clientHeight){
      this.setState({show:false })
    }else{
      this.setState({show:true})
    }
  }
  componentDidMount() {
    window.addEventListener('resize', this.onWindowResize)
  }
  componentWillUnmount() {
      window.removeEventListener('resize', this.onWindowResize)
  }
  render(){
    let pathname = this.props.location.pathname
    return (
      <div className={pathname==='/' || pathname==='/order' || pathname==='/my' ? "footer" : null} style={this.state.show ? null : {display:'none'}}>
        {pathname==='/' || pathname==='/order' || pathname==='/my' ?
        <div>
          <NavLink exact to='/'>
            <div>
              <svg viewBox="0 0 1024 1024"><path fill="#fff" d="M955.050 518.179l-443.037-414.642-443.037 413.425c-8.663 8.090-9.15 21.693-1.044 30.355 8.090 8.663 21.693 9.15 30.355 1.044l413.697-386.033 413.712 387.207c4.151 3.879 9.422 5.799 14.676 5.799 5.728 0 11.455-2.276 15.679-6.802 8.105-8.663 7.661-22.251-1.003-30.355zM819.852 526.699c-11.856 0-21.477 9.622-21.477 21.477v329.332h-171.826v-229.101h-229.101v229.101h-171.826v-329.332c0-11.856-9.609-21.477-21.477-21.477s-21.477 9.622-21.477 21.477v372.288h257.738v-229.101h143.188v229.101h257.738v-372.288c0-11.856-9.623-21.477-21.479-21.477zM669.505 218.847h128.869v114.549c0 11.871 9.622 21.477 21.477 21.477s21.477-9.609 21.477-21.477v-157.506h-171.826c-11.856 0-21.477 9.609-21.477 21.477s9.623 21.477 21.479 21.477z" /></svg>
              <p>首页</p>
            </div>
          </NavLink>
          <NavLink to='/order'>
            <div>
              <svg viewBox="0 0 1024 1024"><path fill="#fff" d="M198.593939 1024C139.636364 1024 89.987879 974.351515 89.987879 915.393939l0-620.606061c0-40.339394 34.133333-74.472727 74.472727-74.472727l68.266667 0C276.169697 220.315152 310.30303 186.181818 310.30303 142.739394L310.30303 74.472727C310.30303 34.133333 344.436364 0 384.775758 0l437.527273 0c58.957576 0 108.606061 49.648485 108.606061 108.606061l0 806.787879c0 58.957576-49.648485 108.606061-108.606061 108.606061L198.593939 1024zM164.460606 282.375758C158.254545 282.375758 152.048485 288.581818 152.048485 294.787879l0 620.606061C152.048485 940.218182 173.769697 961.939394 198.593939 961.939394l626.812121 0c24.824242 0 46.545455-21.721212 46.545455-46.545455l0-806.787879c0-24.824242-21.721212-46.545455-46.545455-46.545455L384.775758 62.060606C378.569697 62.060606 372.363636 68.266667 372.363636 74.472727l0 68.266667c0 77.575758-62.060606 139.636364-139.636364 139.636364L164.460606 282.375758zM465.454545 341.333333l310.30303 0 0 62.060606-310.30303 0 0-62.060606ZM248.242424 480.969697l527.515152 0 0 62.060606-527.515152 0 0-62.060606ZM248.242424 626.812121l527.515152 0 0 62.060606-527.515152 0 0-62.060606Z" /></svg>
              <p>订单</p>
            </div>
          </NavLink>
          <NavLink to='/my'>
            <div>
              <svg viewBox="0 0 1024 1024"><path fill="#fff" d="M513.008464 139.44789C515.920154 139.510832 550.215328 140.773377 582.801302 158.341642 625.004755 181.153851 645.569501 220.391493 645.569501 278.277289 645.569501 370.592442 625.260579 404.020893 605.583184 436.31145 589.38103 463.039648 572.552298 490.653971 572.552298 539.118192 572.552298 598.704662 633.800387 625.499504 698.658429 653.808662 786.298349 692.100938 885.64065 735.571747 885.64065 853.356253L885.64065 922.170534C885.64065 943.021664 902.537357 959.893862 923.41601 959.893862 944.295901 959.893862 961.192608 943.021664 961.192608 922.170534L961.192608 853.356253C961.192608 686.223869 821.414134 625.056442 728.90368 584.675968 704.987277 574.253488 682.462454 564.395021 666.579155 554.729078 650.12736 544.676848 648.104253 539.181136 648.104253 539.118192 648.104253 511.822282 656.393181 498.173709 670.185402 475.486147 691.696816 440.101555 721.121456 391.69904 721.121456 278.277289 721.121456 168.137168 663.730493 115.247251 615.576365 90.288837 566.22345 64.694832 518.323907 64 513.008464 64L512.245936 64C506.930493 64 459.032189 64.757774 409.67927 90.288837 361.523907 115.247251 304.134179 168.137168 304.134179 278.277289 304.134179 391.69904 333.557584 440.101555 355.070234 475.486147 368.799427 498.107062 377.088352 511.759338 377.156326 539.118192 377.156326 539.181136 375.128275 544.676848 358.67648 554.729078 342.793181 564.395021 320.205331 574.253488 296.288927 584.675968 203.840265 625.119382 64 686.223869 64 853.356253L64 922.170534C64 943.021664 80.896706 959.893862 101.77536 959.893862 122.65525 959.893862 139.551956 943.021664 139.551956 922.170534L139.551956 853.356253C139.551956 735.508803 238.894257 692.100938 326.534179 653.808662 391.455251 625.499504 452.707046 598.704662 452.707046 539.118192 452.707046 490.71568 435.936397 463.039648 419.677395 436.31145 399.995056 404.020893 379.686134 370.592442 379.686134 278.277289 379.686134 220.391493 400.18785 181.153851 442.454333 158.341642 475.04031 140.711669 509.335482 139.510832 512.245936 139.44789L513.008464 139.44789 513.008464 139.44789Z" /></svg>
              <p>我的</p>
            </div>
          </NavLink>
        </div>
        : null}

      </div>

    )
  }
}

export default withRouter(Footer)
